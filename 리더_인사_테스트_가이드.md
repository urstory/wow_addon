# Fox Chat 리더 전용 인사 기능 테스트 가이드

## 테스트 준비

### 1. 디버그 모드 활성화
```
/fcdbg
```
또는
```
/foxchatdebug
```

디버그 모드를 켜면 인사 기능 작동 시 상세 로그가 출력됩니다.

### 2. 설정창 열기
- 미니맵 버튼 클릭
- 또는 `/fc` 명령어 사용

### 3. 자동 탭 → 인사 메뉴 선택
- 좌측 메뉴에서 "인사" 클릭
- "다른 사람이 파티에 참가할 때 인사" 체크박스 활성화

## 테스트 시나리오

### 시나리오 1: 파티장 인사 테스트

1. **파티 생성**
   - 파티 생성 또는 다른 사람 초대하여 파티장 되기

2. **파티장 인사말 설정**
   - "리더 전용 인사말" 섹션
   - "내가 파티장일 때" 텍스트 영역에 입력:
   ```
   {name}님 파티에 오신 것을 환영합니다!
   파티장입니다. 잘 부탁드려요.
   오늘 함께 즐거운 모험해요!
   ```

3. **다른 플레이어 초대**
   - 친구나 다른 캐릭터 초대

4. **확인 사항**
   - 3줄 모두 순서대로 파티 채팅에 출력되는지 확인
   - {name} 변수가 참가자 이름으로 치환되는지 확인
   - 메시지 간 0.5초 간격으로 발송되는지 확인

### 시나리오 2: 공대장 인사 테스트

1. **공격대 생성**
   - 파티를 공격대로 전환

2. **공대장 인사말 설정**
   - "내가 공대장일 때" 텍스트 영역에 입력:
   ```
   {name}님 공격대 참가를 환영합니다!
   공대장입니다. 음성채팅 디스코드 참여 부탁드려요.
   탱커는 1번대, 힐러는 2번대로 이동해주세요.
   버프 확인하고 시작하겠습니다!
   ```

3. **다른 플레이어 초대**
   - 여러 명 초대하여 공격대 구성

4. **확인 사항**
   - RAID_WARNING 채널로 출력되는지 확인 (주황색 텍스트)
   - 4줄 모두 순서대로 출력되는지 확인
   - 각 참가자마다 인사말이 발송되는지 확인

### 시나리오 3: 일반 멤버 인사 테스트

1. **리더 권한 해제**
   - 파티장/공대장 권한을 다른 사람에게 넘기기

2. **일반 인사말 설정**
   - "다른 사람이 파티에 참가할 때" 영역에 입력:
   ```
   {name}님 환영합니다!
   {name}님 어서오세요~
   반갑습니다 {name}님!
   ```

3. **새 멤버 참가 확인**
   - 다른 사람이 파티에 참가할 때
   - 3개 메시지 중 랜덤으로 1개만 출력되는지 확인

### 시나리오 4: 우선순위 테스트

1. **모든 인사말 설정**
   - 일반 인사말 설정
   - 파티장 인사말 설정
   - 공대장 인사말 설정

2. **파티장으로 테스트**
   - 파티장일 때: 파티장 전용 인사말 사용 확인
   - 일반 인사말은 무시되는지 확인

3. **일반 멤버로 테스트**
   - 리더가 아닐 때: 일반 인사말 사용 확인

## 디버그 로그 확인

디버그 모드에서 확인할 수 있는 정보:
- `[FoxChat Debug] 인사 체크: 대상=플레이어명, 공대장=false, 파티장=true`
- `[FoxChat Debug] 파티장 인사말 사용, 채널: PARTY`
- `[FoxChat Debug] 공대장 인사말 사용, 채널: RAID_WARNING`

## 문제 해결

### 인사말이 출력되지 않는 경우
1. "다른 사람이 파티에 참가할 때 인사" 체크박스 확인
2. 인사말 텍스트가 비어있지 않은지 확인
3. 디버그 모드로 로그 확인

### 리더 전용 인사말이 작동하지 않는 경우
1. 실제로 파티장/공대장인지 확인
2. 리더 전용 인사말 텍스트 영역에 내용이 있는지 확인
3. `/reload` 명령으로 UI 새로고침

### 변수가 치환되지 않는 경우
1. `{name}` 형식이 정확한지 확인 (대소문자 구분 없음)
2. 중괄호 {} 사용 확인

## 쿨다운 정보
- 같은 사람에 대한 인사 쿨다운: 10초
- 인사 발송 초기 딜레이: 1.5초
- 여러 줄 발송 시 줄 간격: 0.5초