# FoxChat Update - 2025-10-02

## English

### New Features
1. **Trade Channel Filtering**
   - Added Trade channel as a separate filtering category
   - Trade channel appears after Public channel in the UI
   - Supports channel detection for both Korean (거래) and English (Trade)
   - Default highlight color: Purple

2. **Enhanced Channel Detection**
   - Improved LFG channel pattern detection for Korean WoW client
   - Fixed infinite loop bug in keyword highlighting
   - Better handling of channel-specific messages

3. **UI Improvements**
   - Reordered channel tabs: LFG → Party/Raid → Guild → Public → Trade
   - Clean toast notifications showing only the actual message content
   - Removed debug logs for toast position

4. **Bug Fixes**
   - Fixed infinite loop when processing messages with Korean keywords
   - Fixed toast messages showing HTML tags and channel info
   - Fixed public channel (Say/Yell) filtering not working properly
   - Improved Korean text pattern matching (string.lower() compatibility)

### Test Commands
- `/fc test [channel] [message]` - Test filtering for specific channels
  - Channels: lfg, trade, guild, say/public, party

---

## 한국어

### 새로운 기능
1. **거래 채널 필터링**
   - 거래 채널을 별도의 필터링 카테고리로 추가
   - UI에서 공개 채널 다음에 거래 채널 표시
   - 한국어(거래)와 영어(Trade) 모두 채널 감지 지원
   - 기본 하이라이트 색상: 보라색

2. **향상된 채널 감지**
   - 한국 와우 클라이언트용 파티찾기 채널 패턴 감지 개선
   - 키워드 하이라이팅 무한 루프 버그 수정
   - 채널별 메시지 처리 개선

3. **UI 개선**
   - 채널 탭 순서 변경: 파티찾기 → 파티/공격대 → 길드 → 공개 → 거래
   - 실제 메시지 내용만 표시하는 깨끗한 토스트 알림
   - 토스트 위치 디버그 로그 제거

4. **버그 수정**
   - 한글 키워드 처리 시 발생하던 무한 루프 수정
   - 토스트 메시지에 HTML 태그와 채널 정보가 표시되던 문제 수정
   - 공개 채널(일반/외침) 필터링이 제대로 작동하지 않던 문제 수정
   - 한글 텍스트 패턴 매칭 개선 (string.lower() 호환성)

### 테스트 명령어
- `/fc test [채널] [메시지]` - 특정 채널 필터링 테스트
  - 채널: 파티찾기, 거래, 길드, 공개/일반, 파티

---

## Developer / 개발자
우르사 (20주년 하드코어 클래식 서버, Fox and Wolf 길드)