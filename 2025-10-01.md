# FoxChat 와우위키 기능 개발 (2025-10-01)

## 개발 개요
FoxChat 애드온에 와우 클래식 게임 정보를 빠르게 조회할 수 있는 와우위키 팝업 기능을 추가했습니다.

## 주요 기능

### 1. 와우위키 도움말 시스템
- **명령어**: `!!와우위키`, `!!와우정보`
- 사용 가능한 모든 명령어 목록을 개인 채팅 로그에 표시
- 명령어는 채팅에 전송되지 않고 로컬에서만 처리

### 2. 전문기술 숙련 가이드 (12개)
각 전문기술의 1~300 레벨 숙련 가이드를 팝업으로 제공

#### 제작 전문기술
- `!!마부숙련`, `!!마법부여숙련` - 마법부여 숙련 가이드
- `!!대장숙련` - 대장기술 숙련 가이드
- `!!기공숙련`, `!!기계공학숙련` - 기계공학 숙련 가이드
- `!!재봉숙련`, `!!재봉술숙련` - 재봉술 숙련 가이드
- `!!연금술숙련` - 연금술 숙련 가이드

#### 보조 전문기술
- `!!요리숙련` - 요리 숙련 가이드
- `!!낚시숙련` - 낚시 숙련 가이드
- `!!응치숙련`, `!!응급치료숙련` - 응급치료 숙련 가이드

#### 특수
- `!!자물쇠`, `!!자물쇠숙련` - 도적 자물쇠 따기 숙련 가이드
- `!!마부`, `!!마부재료` - 마법부여 분해 재료 정보

### 3. 게임 정보 가이드
- `!!하코`, `!!하코위험지역`, `!!하드코어위험`, `!!하드코어위험지역`
  - 하드코어 서버 위험 지역 정보
  - PVP 플래그 지역, 위험 몹 로밍 지역 등 상세 정보

- `!!인던`, `!!인스턴스던전`, `!!던전정보`, `!!인던정보`
  - 적정 인던 입장 레벨 가이드
  - 딜러/탱커/힐러별 권장 레벨

## 기술적 구현

### 팝업 시스템
- 모든 팝업은 드래그 가능한 프레임으로 구현
- BackdropTemplate 상속으로 SetBackdrop 오류 해결
- ScrollFrame과 EditBox를 사용한 스크롤 가능한 텍스트 표시

### ESC 키 처리 개선
- 각 팝업 프레임을 `UISpecialFrames` 테이블에 추가
- ESC 키로 팝업창을 정상적으로 닫을 수 있도록 수정
- 기존 문제: ESC 키 입력 시 설정창이 열리는 문제 해결

### 코드 구조
```lua
-- 팝업 생성 함수 패턴
local function ShowXXXPopup()
    -- 기존 팝업 제거
    if XXXPopupFrame then
        XXXPopupFrame:Hide()
        XXXPopupFrame = nil
    end

    -- 프레임 생성 (BackdropTemplate 상속)
    local frame = CreateFrame("Frame", "XXXPopupFrame", UIParent, "BackdropTemplate")
    -- 프레임 설정...

    -- ESC 키 처리
    tinsert(UISpecialFrames, "XXXPopupFrame")
end
```

### SendChatMessage 후킹
- !! 로 시작하는 명령어를 가로채어 처리
- 명령어가 채팅에 전송되지 않도록 return 처리
- 기존 말머리/말꼬리 기능과 충돌 없이 동작

## 추가된 데이터 파일
- `마부재료.txt` - 마법부여 분해 재료 데이터
- `자물쇠.txt` - 도적 자물쇠 따기 가이드
- `연금술숙련.txt` - 연금술 1-300 가이드
- `요리숙련.txt` - 요리 1-300 가이드
- `낚시숙련.txt` - 낚시 1-300 가이드
- `응급치료숙련.txt` - 응급치료 1-300 가이드
- `대장숙련.txt` - 대장기술 1-300 가이드
- `기계공학숙련.txt` - 기계공학 1-300 가이드
- `재봉술숙련.txt` - 재봉술 1-300 가이드
- `마법부여숙련.txt` - 마법부여 1-300 가이드
- `하코.txt` - 하드코어 위험지역 정보
- `인던.txt` - 적정 인던 레벨 정보

## 사용자 경험 개선
1. **로딩 시 안내**: FoxChat 로딩 시 "!!와우위키 라고 채팅창에 입력해보세요" 메시지 표시
2. **직관적인 명령어**: 한글 명령어로 쉽게 기억하고 사용 가능
3. **개인 정보 보호**: 모든 명령어와 팝업은 로컬에서만 처리되어 다른 플레이어에게 노출되지 않음
4. **일관된 UI**: 모든 팝업이 동일한 스타일과 동작 방식을 가짐

## 향후 개선 사항
- [ ] 팝업 위치 저장 기능
- [ ] 폰트 크기 조절 기능
- [ ] 검색 기능 추가
- [ ] 즐겨찾기 기능

## 개발자 정보
- 개발자: 우르사 (20주년 하드코어 클래식 서버, Fox and Wolf 길드)
- 개발일: 2025년 10월 1일
- 버전: FoxChat 와우위키 1.0